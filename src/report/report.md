##Часть 1. Настройка gitlab-runner

Запустите виртуальную машину Ubuntu Server 20.04 LTS
![vbox](vbox.png)
![ubuntu](ubuntu.png)

Загрузите gitlab-runner на виртуальную машину
![download](download.png)

Установите gitlab-runner на виртуальную машину
![install](install.png)

После установки gitlab-runner разрешаем автозапуск сервиса и стартуем его
![start](start.png)

Для регистрации понадобятся URL и токен, которые можно получить на страничке задания на платформе
![projectpage](projectpage.png)

Зарегистрируйте его для использования в текущем проекте ( DO6_CICD )
![register](register.png)


##Part 2. Сборка

Написать этап для CI по сборке приложений из проекта C2_SimpleBashUtils:

В файле gitlab-ci.yml добавить этап запуска сборки через мейк файл из проекта C2
![create_yml](create_yml.png)

Файлы, полученные после сборки (артефакты), сохранять в произвольную директорию со сроком хранения 30 дней
![insert_yml](insert_yml.png)

Устанавливает мета-пакет build-essential, который включает в себя основные инструменты для разработки и
утилиту make, которая помогает автоматизировать процесс сборки программ
![install_make](install_make.png)

Результат
![passed](passed0.png)
![job_succeeded](job_succeeded0.png)


##Part 3. Тест кодстайла

Написать этап для CI, который запускает скрипт кодстайла (clang-format):

Установка clang-format на Ubuntu
![install_clang-format](install_clang-format.png)

Если кодстайл не прошел, то "зафейлить" пайплайн
![job_failed](job_failed0.png)

В пайплайне отобразить вывод утилиты clang-format
Результат
![passed](passed1.png)
![job_succeeded](job_succeeded1.png)


##Part 4. Интеграционные тесты

Написать этап для CI, который запускает ваши интеграционные тесты из того же проекта:

Запускать этот этап автоматически только при условии, если сборка и тест кодстайла прошли успешно
![dependencies](dependencies.png)

Если тесты не прошли, то "зафейлить" пайплайн и в пайплайне отобразить вывод, что интеграционные тесты 
успешно прошли / провалились
Результат отрицательный
![failed](failed0.png)
![job_failed](job_failed1.png)

Результат положительный
![passed](passed2.png)
![job_succeeded](job_succeeded2.png)


##Part 5. Этап деплоя

Поднять вторую виртуальную машину Ubuntu Server 20.04 LTS
![vbox2](vbox2.png)
![vbox2](2vbox.png)

Написать этап для CD, который "разворачивает" проект на другой виртуальной машине:

Запускать этот этап вручную при условии, что все предыдущие этапы прошли успешно и
В случае ошибки "зафейлить" пайплайн
В файле gitlab-ci.yml добавить этап запуска написанного скрипта
![manual](manual.png)

Написать bash-скрипт, который при помощи ssh и scp копирует файлы, полученные после сборки (артефакты), в директорию /usr/local/bin второй виртуальной машины
![script](script.png)

В результате вы должны получить готовые к работе приложения из проекта C2_SimpleBashUtils (s21_cat и s21_grep) на второй виртуальной машине.
![passed](passed3.png)
![job_succeeded](job_succeeded3.png)
![deployvb](deployvb.png)

Сохранить дампы образов виртуальных машин
p.s. Ни в коем случае не сохранять дампы в гит!

Сохранила :) через Export to OCI...


##Part 6. Дополнительно. Уведомления

Настроить уведомления о успешном/неуспешном выполнении пайплайна через бота с именем "[ваш nickname] DO6 CI/CD" в Telegram
![tg](tg.png)
![tg2](tg2.png)

Текст уведомления должен содержать информацию об успешности прохождения как этапа CI, так и этапа CD.
В остальном текст уведомления может быть произвольным.
![tgnotify](tgnotify.png)



